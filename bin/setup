#!/bin/sh

setup() {
  bundle install --path vendor/bundle
}

set_gopath() {
  if [ -z ${GOPATH} ]; then
    # If $GOPATH is empty, Go installs packages to $HOME/go.
    export GOPATH=${HOME}/Workspaces/Repositories
  fi
}

serverkit() {
  local command=$1
  local recipe=$2

  bundle exec serverkit $command "$recipe" \
    --variables=variables \
    --log-level=DEBUG
}

setup
set_gopath
serverkit apply 'recipes/main_recipe.yml'
