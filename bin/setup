#!/bin/sh

setup() {
  bundle install --path vendor/bundle
}

serverkit_apply() {
  local recipe=$1

  bundle exec serverkit apply "$recipe" \
    --variables=variables \
    --log-level=DEBUG
}

setup

serverkit_apply 'recipes/homebrew_recipe.yml.erb'
serverkit_apply 'recipes/atom_recipe.yml.erb'
serverkit_apply 'recipes/dnsmasq_recipe.yml.erb'
serverkit_apply 'recipes/go_recipe.yml.erb'
serverkit_apply 'recipes/ruby_recipe.yml.erb'
serverkit_apply 'recipes/vagrant_recipe.yml.erb'
serverkit_apply 'recipes/defaults_recipe.yml.erb'
